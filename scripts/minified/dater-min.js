/*  ###########################################################################
    Author:     
    Project:    
    ########################################################################### */(function(e){typeof define=="function"&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){e.fn.dater=function(t){return this.each(function(r,i){var s=e(this),o=e('<div class="dater-widget" id="daterWidget'+r+'"><header><a class="dater-year-previous">&#9668;</a><span></span><a class="dater-year-next">&#9658;</a></header><aside></aside><section></section><footer><a class="dater-today">today</a></footer></div>'),u={today:new Date.today,thisDate:s.val()===""?Date.today():Date.parse(s.val()),format:"dd-MM-yyyy",placeholder:""},a=e.extend(u,t),f=function(e,t){return e.toString(t)},c=function(e,t){return Number(e.toString(t))-1},h=function(t){t=t?t:o;t.fadeOut("fast",function(){e(this).detach()});v=!1},p=Date.getMonthNumberFromName(a.thisDate.toString("MMMM")),d,v=!1,m=function(e,t){y(a.thisDate);s.val(f(a.thisDate,a.format));e.addClass("active")},g=function(t,i){e(".dater-widget:not('daterWidget"+r+"')").detach();var s="",u="";for(n in Date.CultureInfo.abbreviatedMonthNames)s+='<a data-month="'+n+'">'+Date.CultureInfo.abbreviatedMonthNames[n]+"</a>";var h=function(e){var t=(e<10?"0":"")+e+f(a.thisDate,".MMM.yyyy"),n=Date.getDayNumberFromName(Date.parse(t).toString("ddd"));return n};for(n=0,l=Date.CultureInfo.firstLetterDayNames.length;n<l;n++)u+="<span>"+Date.CultureInfo.firstLetterDayNames[n==6?0:n+1]+"</span>";for(x=0,l=Date.getDaysInMonth(c(a.thisDate,"yyyy")+1,c(a.thisDate,"MM"));x<l;x++)u+='<a data-day="'+h(x+1)+'">'+(x+1)+"</a>";e("header span",o).html(f(a.thisDate,"yyyy"));e("section",t).html(u);e("aside",t).html(s);e("body").append(t);t.hide();e("section a:first").addClass("first");y(a.thisDate);b(t);typeof i=="function"&&i()},y=function(t){e("[data-day],[data-month]",o).removeClass("active");e("[data-day]",o).eq(c(t,"dd")).addClass("active");e("[data-month]",o).eq(c(t,"MM")).addClass("active");e("header span",o).html(f(a.thisDate,"yyyy"));clearTimeout(d)},b=function(t){var n=s.offset(),r=t.outerHeight()+(n.top+s.outerHeight())>e("body").outerHeight();t.css({position:"absolute",zIndex:"4242",top:n.top+s.outerHeight(),left:n.left})};typeof s.attr("placeholder")!="string"&&s.attr("placeholder",a.placeholder===""?a.format.toLowerCase():a.placeholder);o.on("click",function(e){e.stopPropagation()});o.on("click",".dater-today",function(t){t.preventDefault();s.val(f(a.today,a.format));y(a.today);h(e(t.delegateTarget));return!1});o.on("click","[data-day]",function(t){t.preventDefault();a.thisDate.set({day:Number(e(this).text())});m(e(this));h(e(t.delegateTarget));return!1});o.on("click","[data-month]",function(t){t.preventDefault();a.thisDate.set({month:Date.getMonthNumberFromName(e(this).text())});m(e(this));s.focus();return!1});o.on("click","header a",function(t){t.preventDefault();e(this).is(".dater-year-next")?a.thisDate.addYears(1):a.thisDate.addYears(-1);s.val(f(a.thisDate,a.format));y(a.thisDate);s.focus()});o.on("mouseout",function(e){e.preventDefault();d=setTimeout(h,800)});o.on("mouseover",function(e){e.preventDefault();console.log("over");clearTimeout(d)});s.on("focus focus.dater",function(t){e(this).trigger("render.dater")});s.on("click render.dater",function(t){t.preventDefault();e("#daterWidget"+r).is(":visible")==0&&g(o,function(){o.fadeIn("fast");v=!0})});s.on("change",function(t){a.thisDate=Date.parse(e(this).val())});s.on("mouseout",function(e){d=setTimeout(h,800)})})}});